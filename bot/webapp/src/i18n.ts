// Simple i18n implementation
const translations = {
  en: {
    loading: "Loading…",
    available_tours: "Tours",
    seats_left: "seats left",
    my_bookings: "My Bookings",
    back: "Back",
    back_to_tours: "Back to tours",
    cancel: "Cancel",
    checkout: "Checkout – {date}",
    total: "Total",
    confirm: "Confirm Booking",
    booking_confirmed: "Booking confirmed!",
    missing_ctx: "Missing context",
    not_found: "Not found",
    upcoming_departures: "Upcoming departures",
    book: "Book",
    seats: "seats",
    no_departures: "No available dates",
    contact_info: "Contact Information",
    name: "Name",
    phone: "Phone",
    enter_name: "Enter your name",
    enter_phone: "Enter your phone number",
    select_tickets: "Select tickets",
    name_required: "Please enter your name",
    phone_required: "Please enter your phone number",
    invalid_phone: "Please enter a valid phone number",
    phone_format: "Enter number with country code (e.g., +1 234 567 8901)",
    booking_error: "Error processing booking. Please try again.",
    quote_error: "Error calculating price. Please try again.",
    processing: "Processing...",
    hours: "h",
    minutes: "min",
    auth_required: "Authentication required. Please restart the bot.",
    validation_error: "Data validation error. Please check your form inputs.",
    no_tours: "No available tours",
    virtual_departure_error: "Failed to create departure. Please select a different date.",
    no_bookings: 'You have no bookings yet',
    no_upcoming_bookings: 'You have no upcoming bookings',
    no_past_bookings: 'You have no past bookings',
    tab_upcoming: 'Upcoming',
    tab_past: 'Past',
    status_confirmed: 'Confirmed',
    status_rejected: 'Rejected',
    status_cancelled: 'Cancelled',
    status_pending: 'Pending',
    error: 'Error',
    error_loading_bookings: 'Failed to load bookings',
    error_canceling_booking: 'Failed to cancel booking',
    error_unauthorized: 'Please log in to view your bookings',
    confirm_cancel_title: 'Cancel booking?',
    confirm_cancel_description: 'Are you sure you want to cancel this booking?',
    yes_cancel: 'Yes, cancel',
    no_keep: 'No, keep it',
    // Filter translations
    filters: 'Filters',
    categories: 'Categories',
    min: 'Min',
    max: 'Max',
    from: 'From',
    to: 'To',
    time_from: 'Time from',
    time_to: 'Time to',
    reset: 'Reset',
    price_range: 'Price Range',
    date_range: 'Date Range',
    time_range: 'Time Range',
    apply_filters: 'Apply Filters',
    no_categories: 'No categories available',
    no_tours_found: 'No tours found',
    try_different_filters: 'Try adjusting your filters',
    no_image: 'No image',
    price: 'Price',
    total_tickets: 'Total tickets',
    details: 'Details',
    meeting_point: 'Meeting point',
  },
  ru: {
    loading: "Загрузка…",
    available_tours: "Экскурсии",
    seats_left: "осталось мест",
    my_bookings: "Мои бронирования",
    back: "Назад",
    back_to_tours: "Назад к экскурсиям",
    cancel: "Отменить",
    checkout: "Бронирование – {date}",
    total: "Итого",
    confirm: "Подтвердить бронирование",
    booking_confirmed: "Бронирование подтверждено!",
    missing_ctx: "Недостаточно данных",
    not_found: "Не найдено",
    upcoming_departures: "Ближайшие даты",
    book: "Забронировать",
    seats: "мест",
    no_departures: "Нет доступных дат",
    contact_info: "Контактная информация",
    name: "Имя",
    phone: "Телефон",
    enter_name: "Введите ваше имя",
    enter_phone: "Введите номер телефона",
    select_tickets: "Выберите билеты",
    name_required: "Пожалуйста, укажите имя",
    phone_required: "Пожалуйста, укажите номер телефона",
    invalid_phone: "Пожалуйста, введите корректный номер телефона",
    phone_format: "Введите номер с кодом страны (например, +7 123 456 7890)",
    booking_error: "Ошибка при бронировании. Пожалуйста, попробуйте еще раз.",
    quote_error: "Ошибка при расчете стоимости. Пожалуйста, попробуйте еще раз.",
    processing: "Обработка...",
    hours: "ч",
    minutes: "мин",
    auth_required: "Требуется авторизация. Пожалуйста, перезапустите бот.",
    validation_error: "Ошибка валидации данных. Проверьте правильность заполнения формы.",
    no_tours: "Нет доступных экскурсий",
    virtual_departure_error: "Не удалось создать отправление. Пожалуйста, выберите другую дату.",
    no_bookings: 'У вас пока нет бронирований',
    no_upcoming_bookings: 'У вас нет предстоящих бронирований',
    no_past_bookings: 'У вас нет прошедших бронирований',
    tab_upcoming: 'Предстоящие',
    tab_past: 'Прошедшие',
    status_confirmed: 'Подтверждено',
    status_rejected: 'Отклонено',
    status_cancelled: 'Отменено',
    status_pending: 'В ожидании',
    error: 'Ошибка',
    error_loading_bookings: 'Не удалось загрузить бронирования',
    error_canceling_booking: 'Не удалось отменить бронирование',
    error_unauthorized: 'Пожалуйста, войдите в систему для просмотра бронирований',
    confirm_cancel_title: 'Отменить бронирование?',
    confirm_cancel_description: 'Вы уверены, что хотите отменить это бронирование?',
    yes_cancel: 'Да, отменить',
    no_keep: 'Нет, оставить',
    // Filter translations
    filters: 'Фильтры',
    categories: 'Категории',
    min: 'Мин',
    max: 'Макс',
    from: 'От',
    to: 'До',
    time_from: 'Время от',
    time_to: 'Время до',
    reset: 'Сбросить',
    price_range: 'Диапазон цен',
    date_range: 'Диапазон дат',
    time_range: 'Диапазон времени',
    apply_filters: 'Применить фильтры',
    no_categories: 'Категории недоступны',
    no_tours_found: 'Экскурсии не найдены',
    try_different_filters: 'Попробуйте изменить фильтры',
    no_image: 'Нет изображения',
    price: 'Цена',
    total_tickets: 'Всего билетов',
    details: 'Подробнее',
    meeting_point: 'Место встречи',
  }
};

// Get user's language or default to English
const getUserLanguage = () => {
  const lang = navigator.language?.split('-')[0] || 'en';
  return translations[lang] ? lang : 'en';
};

const currentLang = getUserLanguage();

export const t = (key: string): string => {
  return translations[currentLang]?.[key] || key;
};

// Format price with currency
export const fmtPrice = (amount: number): string => {
  return new Intl.NumberFormat('ru-RU', {
    style: 'currency',
    currency: 'RUB',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0,
  }).format(amount);
}; 