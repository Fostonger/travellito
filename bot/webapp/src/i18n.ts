// Simple i18n implementation
const translations = {
  en: {
    loading: "Loading…",
    available_tours: "Available Tours",
    seats_left: "seats left",
    my_bookings: "My Bookings",
    back: "Back",
    cancel: "Cancel",
    checkout: "Checkout – {date}",
    total: "Total:",
    confirm: "Confirm Booking",
    booking_confirmed: "Booking confirmed!",
    missing_ctx: "Missing context",
    not_found: "Not found",
    upcoming_departures: "Upcoming departures",
    book: "Book",
    seats: "seats",
    no_departures: "No available dates",
    contact_info: "Contact Information",
    name: "Name",
    phone: "Phone",
    enter_name: "Enter your name",
    enter_phone: "Enter your phone number",
    select_tickets: "Select tickets",
    name_required: "Please enter your name",
    phone_required: "Please enter your phone number",
    booking_error: "Error processing booking. Please try again.",
    quote_error: "Error calculating price. Please try again.",
    processing: "Processing...",
    hours: "h",
    minutes: "min",
    auth_required: "Authentication required. Please restart the bot.",
    validation_error: "Data validation error. Please check your form inputs.",
    no_tours: "No available tours",
    virtual_departure_error: "Failed to create departure. Please select a different date.",
    no_bookings: 'You have no bookings yet',
    no_upcoming_bookings: 'You have no upcoming bookings',
    no_past_bookings: 'You have no past bookings',
    tab_upcoming: 'Upcoming',
    tab_past: 'Past',
    status_confirmed: 'Confirmed',
    status_rejected: 'Rejected',
    status_cancelled: 'Cancelled',
    status_pending: 'Pending',
    error: 'Error',
    error_loading_bookings: 'Failed to load bookings',
    error_canceling_booking: 'Failed to cancel booking',
    error_unauthorized: 'Please log in to view your bookings',
    confirm_cancel_title: 'Cancel booking?',
    confirm_cancel_description: 'Are you sure you want to cancel this booking?',
    yes_cancel: 'Yes, cancel',
    no_keep: 'No, keep it',
  },
  ru: {
    loading: "Загрузка…",
    available_tours: "Доступные экскурсии",
    seats_left: "осталось мест",
    my_bookings: "Мои бронирования",
    back: "Назад",
    cancel: "Отменить",
    checkout: "Бронирование – {date}",
    total: "Итого:",
    confirm: "Подтвердить бронирование",
    booking_confirmed: "Бронирование подтверждено!",
    missing_ctx: "Недостаточно данных",
    not_found: "Не найдено",
    upcoming_departures: "Ближайшие даты",
    book: "Забронировать",
    seats: "мест",
    no_departures: "Нет доступных дат",
    contact_info: "Контактная информация",
    name: "Имя",
    phone: "Телефон",
    enter_name: "Введите ваше имя",
    enter_phone: "Введите номер телефона",
    select_tickets: "Выберите билеты",
    name_required: "Пожалуйста, укажите имя",
    phone_required: "Пожалуйста, укажите номер телефона",
    booking_error: "Ошибка при бронировании. Пожалуйста, попробуйте еще раз.",
    quote_error: "Ошибка при расчете стоимости. Пожалуйста, попробуйте еще раз.",
    processing: "Обработка...",
    hours: "ч",
    minutes: "мин",
    auth_required: "Требуется авторизация. Пожалуйста, перезапустите бот.",
    validation_error: "Ошибка валидации данных. Проверьте правильность заполнения формы.",
    no_tours: "Нет доступных экскурсий",
    virtual_departure_error: "Не удалось создать отправление. Пожалуйста, выберите другую дату.",
    no_bookings: 'У вас пока нет бронирований',
    no_upcoming_bookings: 'У вас нет предстоящих бронирований',
    no_past_bookings: 'У вас нет прошедших бронирований',
    tab_upcoming: 'Предстоящие',
    tab_past: 'Прошедшие',
    status_confirmed: 'Подтверждено',
    status_rejected: 'Отклонено',
    status_cancelled: 'Отменено',
    status_pending: 'В ожидании',
    error: 'Ошибка',
    error_loading_bookings: 'Не удалось загрузить бронирования',
    error_canceling_booking: 'Не удалось отменить бронирование',
    error_unauthorized: 'Пожалуйста, войдите в систему для просмотра бронирований',
    confirm_cancel_title: 'Отменить бронирование?',
    confirm_cancel_description: 'Вы уверены, что хотите отменить это бронирование?',
    yes_cancel: 'Да, отменить',
    no_keep: 'Нет, оставить',
  }
};

// Get user's language or default to English
const getUserLanguage = () => {
  const lang = navigator.language?.split('-')[0] || 'en';
  return translations[lang] ? lang : 'en';
};

const currentLang = getUserLanguage();

export const t = (key: string): string => {
  return translations[currentLang]?.[key] || key;
};

// Format price with currency
export const fmtPrice = (amount: number): string => {
  return new Intl.NumberFormat('ru-RU', {
    style: 'currency',
    currency: 'RUB',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0,
  }).format(amount);
}; 