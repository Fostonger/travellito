{% extends "base.html" %}
{% block title %}Управление арендодателями{% endblock %}
{% block body %}
<div class="max-w-7xl mx-auto px-6 py-10">
  <h1 class="text-3xl font-extrabold text-indigo-700 mb-6">Арендодатели</h1>
  <div class="overflow-x-auto bg-white rounded-xl shadow">
    <table class="min-w-full divide-y divide-gray-200" id="landlordsTable">
      <thead class="bg-gray-50"><tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ID</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Имя</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">QR</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Apartments</th>
      </tr></thead>
      <tbody class="bg-white divide-y divide-gray-200" id="landlordsBody"></tbody>
    </table>
  </div>
</div>
<script>
(async () => {
  const res = await fetch('/admin/api/landlords');
  if (!res.ok) return;
  const landlords = await res.json();
  const body = document.getElementById('landlordsBody');
  landlords.forEach(l => {
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>${l.id}</td>
      <td class='px-6 py-4 whitespace-nowrap text-sm text-gray-900'>${l.name}</td>
      <td class='px-6 py-4 whitespace-nowrap text-sm'><a href='/landlord/${l.id}/qrcode' class='text-indigo-600 hover:text-indigo-900' target='_blank'>Скачать</a></td>
      <td class='px-6 py-4 whitespace-nowrap text-sm'><a href='/admin/landlord/${l.id}/apartments' class='text-indigo-600 hover:text-indigo-900'>Просмотр</a></td>`;
    body.appendChild(tr);
  });
})();
</script>
{% endblock %} 